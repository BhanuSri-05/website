Ã‹
    Â£S^hÂ£  Ã£                   Ã³Ã¨   â€” d dl mZmZ d dlmZ d dlZd dlZ eddgÂ¬Â«      Z  G d â€ deÂ«      Zde	d	e	fd
â€Z
d
â€ Z
 e
Â«        e j                  dÂ«      d
efdâ€Â«       Z
e j                  dÂ«      d
efdâ€Â«       Zy)Ã©    )Ãš	APIRouterÃš
HTTPException)Ãš	BaseModelNz/userÃšUser)ÃšprefixÃštagsc                   Ã³"   â€” e Zd ZU eed<   eed<   y)r   ÃšemailÃšpasswordN)Ãš__name__Ãš
__module__Ãš__qualname__ÃšstrÃš__annotations__Â© Ã³    ÃºJC:\Users\iswarya\OneDrive\Desktop\Edu_Tutor-AI\backend\routes\user_auth.pyr   r      s   â€¦ Ã˜
Æ’JÃ˜â€Mr   r
   Ãšreturnc                 Ã³d   â€” t        j                  | j                  Â«       Â«      j                   Â«       S )N)Ãš hashlibÃšsha256ÃšencodeÃš	hexdigest)r
   s    r   Ãš
hash_passwordr      s!   â‚¬ Ãœ
Â>â€°>Ëœ(Å¸/â„¢/Ã“+Ã“
,Ã—
6Ã‘
6Ã“
8Ã8r   c                  Ã³Â°   â€” t        j                  dÂ«      } | j                  Â«       }|j                   dÂ«       | j	                  Â«        | j
                  Â«        y )NÃº
students.dbz^CREATE TABLE IF NOT EXISTS users (
        email TEXT PRIMARY KEY,
        password TEXT
    ))Ãš sqlite3Ãš connectÃšcursorÃš executeÃšcommitÃšclose)ÃšconnÃšcs     r   Ãšinit_manual_user_dbr%      s@   â‚¬ Ãœ
Â?â€°?Ëœ=Ã“
)â‚¬DÃ˜Â
â€°
â€¹
â‚¬AÃ˜â€¡IÂIÃ° 	Ã´ 
Ã° 	â€¡KÂKâ€MÃ˜â€¡JÂJâ€¦Lr   z	/registerÃšuserc                  Ã³Å   â€” t        j                  dÂ«      }|j                  Â«       }|j                   d| j                  fÂ«       |j
                  Â«       r|j
                  Â«        t        ddÂ¬Â«      â€š|j                   d| j                  t        | j                  Â«      fÂ«       |j                  Â«        |j
                  Â«        d diS )	Nr   z!SELECT * FROM users WHERE email=?iÂ  zUser already existsÂ©Ãš
status_codeÃšdetailz1INSERT INTO users (email, password) VALUES (?, ?)Ãš messageu   Ã¢Å“â€¦ Registration successful!)
r   r   r   r    r
   Ãšfetchoner"   r   r   r
   r!   )r&   r#   r$   s      r   Ãšregisterr-   "   sâ€™   â‚¬ Ã¤
Â?â€°?Ëœ=Ã“
)â‚¬DÃ˜Â
â€°
â€¹
â‚¬AÃ˜â€¡IÂIÃ1Â°DÂ·JÂ±JÂ°=Ã”AÃ˜ â€¡zÂzâ€|Ã˜Â
â€°
Å’ÃœÂ¨Ã4IÃ”JÃJÃ â€¡IÂIÃAÃ˜Âzâ€°zÅ“=Â¨Â¯Â©Ã“7Ã8Ã´:Ã â€¡KÂKâ€MÃ˜â€¡JÂJâ€LÃ˜Ã5Ã
6Ã6r   z/loginc                 Ã³"  â€” t        j                  dÂ«      }|j                  Â«       }|j                   d| j                  fÂ«       |j
                  Â«       }|j
                  Â«        |r|d   t        | j                  Â«      k(  rddiS t        dd Â¬Â«      â€š)	Nr   z(SELECT password FROM users WHERE email=?r   r+   u   Ã¢Å“â€¦ Login successful!iâ€˜  zInvalid email or passwordr(   )
r   r   r   r    r
   r,   r"   r   r
   r   )r&   r#   r$   Ãšresults       r   Ãšloginr0   2   su   â‚¬ Ã¤
Â?â€°?Ëœ=Ã“
)â‚¬DÃ˜Â
â€°
â€¹
â‚¬AÃ˜â€¡IÂIÃ8Â¸4Â¿:Â¹:Â¸-Ã”HÃ˜
ÂZâ€°Zâ€¹\â‚¬FÃ˜â€¡JÂJâ€LÃ¡ 
Â&Ëœâ€˜)Å“}Â¨TÂ¯]Â©]Ã“;Ã’;Ã˜Ã2Ã3Ã3Ãœ
Â CÃ0KÃ”
LÃLr   )Ãš fastapir   r   Ãšpydanticr   r   r   Ãšuser_auth_routerr   r   r   r%   Ãšpostr-   r0   r   r   r   Ãº<module>r5      sÅ¸   Ã°ÃŸ ,Ã Ã› Ã› Ã¡Ã˜
Ã˜
Ë†Ã´Ã Ã´Ë†9Ã´ Ã°
9ËœCÃ° 9Â CÃ³ 9Ã²Ã± Ã” Ã° Ã—Ã‘Â{Ã“#Ã°7Â4Ã² 7Ã³ $Ã°7Ã° Ã—Ã‘ÂxÃ“ Ã°	MÂÃ² 	MÃ³ !Ã±	Mr   
