Â§
    dÃ¡[hÂ£  Ã£                   Ã³  â€” d dl mZmZ d dlmZ d dlZd dlZ eddgÂ¬Â¦  Â«        Z  G d â€ deÂ¦  Â«        Zde	d	e	fd
â€Z
d
â€ Z
 e
Â¦   Â«          e Â                     dÂ¦  Â«        d
efdâ€Â¦   Â«         Z
e Â                     dÂ¦  Â«        d
efdâ€Â¦   Â«         ZdS )Ã©    )Ãš	APIRouterÃš
HTTPException)Ãš	BaseModelNz/userÃšUser)ÃšprefixÃštagsc                   Ã³$   â€” e Zd ZU eed<   eed<   dS )r   ÃšemailÃšpasswordN)Ãš__name__Ãš
__module__Ãš__qualname__ÃšstrÃš__annotations__Â© Ã³    ÃºGC:\Users\navya\OneDrive\Desktop\edututor-ai\backend\routes\user_auth.pyr   r      s"   â‚¬ â‚¬ â‚¬ â‚¬ â‚¬ â‚¬ Ã˜
â‚¬Jâ‚¬JÂJÃ˜â‚¬Mâ‚¬MÂMâ‚¬Mâ‚¬Mr   r
   Ãšreturnc                 Ã³r   â€” t          j        | Â                     Â¦   Â«         Â¦  Â«        Â                     Â¦   Â«         S )N)Ãš hashlibÃšsha256ÃšencodeÃš	hexdigest)r
   s    r   Ãš
hash_passwordr      s(   â‚¬ Ã
Å’>Ëœ(Å¸/Å¡/Ã‘+Ã”+Ã‘
,Ã”
,Ã—
6Ã’
6Ã‘
8Ã”
8Ã8r   c                  Ã³Ã   â€” t          j        dÂ¦  Â«        } | Â                     Â¦   Â«         }|Â                     dÂ¦  Â«         | Â                     Â¦   Â«          | Â                     Â¦   Â«          d S )NÃº
students.dbz^CREATE TABLE IF NOT EXISTS users (
        email TEXT PRIMARY KEY,
        password TEXT
    ))Ãš sqlite3Ãš connectÃšcursorÃš executeÃšcommitÃšclose)ÃšconnÃšcs     r   Ãšinit_manual_user_dbr%      sY   â‚¬ Ã
Å’?Ëœ=Ã‘
)Ã”
)â‚¬DÃ˜Â
Å 
â€°
Å’
â‚¬AÃ˜â€¡Iâ€šIÃ° 	Ã± 
Ã´ 
Ã° 
Ã° 	â€¡Kâ€šKÂMâ€Mâ‚¬MÃ˜â€¡Jâ€šJÂLâ€Lâ‚¬Lâ‚¬Lâ‚¬Lr   z	/registerÃšuserc                  Ã³Â²  â€” t          j        dÂ¦  Â«        }|Â                     Â¦   Â«         }|Â                     d| j        fÂ¦  Â«         |Â                     Â¦   Â«         r%|Â                     Â¦   Â«          t          ddÂ¬Â¦  Â«        â€š|Â                     d| j        t          | j	        Â¦  Â«        fÂ¦  Â«         |Â 
                    Â¦   Â«          |Â                     Â¦   Â«          d diS )	Nr   z!SELECT * FROM users WHERE email=?iÂ  zUser already existsÂ©Ãš
status_codeÃšdetailz1INSERT INTO users (email, password) VALUES (?, ?)Ãš messageu   Ã¢Å“â€¦ Registration successful!)
r   r   r   r    r
   Ãšfetchoner"   r   r   r
   r!   )r&   r#   r$   s      r   Ãšregisterr-   "   sÂ¼   â‚¬ Ã¥
Å’?Ëœ=Ã‘
)Ã”
)â‚¬DÃ˜Â
Å 
â€°
Å’
â‚¬AÃ˜â€¡Iâ€šIÃ1Â°DÂ´JÂ°=Ã‘AÃ”AÃAÃ˜ â€¡zâ€šzÂ|â€|Ã° KÃ˜Â
Å 
â€°Å’Ë†ÃÂ¨Ã4IÃJÃ‘JÃ”JÃJÃ â€¡Iâ€šIÃAÃ˜Å’zÂ=Â¨Â¬Ã‘7Ã”7Ã8Ã±:Ã´ :Ã° :Ã â€¡Kâ€šKÂMâ€Mâ‚¬MÃ˜â€¡Jâ€šJÂLâ€Lâ‚¬LÃ˜Ã5Ã
6Ã6r   z/loginc                 Ã³D  â€” t          j        dÂ¦  Â«        }|Â                     Â¦   Â«         }|Â                     d| j        fÂ¦  Â«         |Â                     Â¦   Â«         }|Â                     Â¦   Â«          |r"|d         t          | j        Â¦  Â«        k    rddiS t          dd Â¬Â¦  Â«        â€š)	Nr   z(SELECT password FROM users WHERE email=?r   r+   u   Ã¢Å“â€¦ Login successful!iâ€˜  zInvalid email or passwordr(   )
r   r   r   r    r
   r,   r"   r   r
   r   )r&   r#   r$   Ãšresults       r   Ãšloginr0   2   sâ€˜   â‚¬ Ã¥
Å’?Ëœ=Ã‘
)Ã”
)â‚¬DÃ˜Â
Å 
â€°
Å’
â‚¬AÃ˜â€¡Iâ€šIÃ8Â¸4Â¼:Â¸-Ã‘HÃ”HÃHÃ˜
ÂZÅ Zâ€°\Å’\â‚¬FÃ˜â€¡Jâ€šJÂLâ€Lâ‚¬LÃ  
Ã° 4Â&Ëœâ€)Â}Â¨TÂ¬]Ã‘;Ã”;Ã’;Ã;Ã˜Ã2Ã3Ã3Ã
Â CÃ0KÃ
LÃ‘
LÃ”
LÃLr   )Ãš fastapir   r   Ãšpydanticr   r   r   Ãšuser_auth_routerr   r   r   r%   Ãšpostr-   r0   r   r   r   Ãº<module>r5      sI  Ã°Ã˜ ,Ã ,Ã ,Ã ,Ã ,Ã ,Ã ,Ã ,Ã˜ Ã Ã Ã Ã Ã Ã˜ â‚¬â‚¬â‚¬Ã˜ â‚¬â‚¬â‚¬Ã Â9Ã˜
Ã˜
Ë†Ã°Ã± Ã´ Ã Ã°Ã° Ã° Ã° Ã° Ë†9Ã± Ã´ Ã° Ã°
9ËœCÃ° 9Â CÃ° 9Ã° 9Ã° 9Ã° 9Ã°Ã° Ã° Ã° Ã Ã‘ Ã” Ã Ã° Ã—Ã’Â{Ã‘#Ã”#Ã°7Â4Ã° 7Ã° 7Ã° 7Ã± $Ã”#Ã°7Ã° Ã—Ã’ÂxÃ‘ Ã” Ã°	MÂÃ° 	MÃ° 	MÃ° 	MÃ± !Ã” Ã°	MÃ° 	MÃ° 	Mr   
